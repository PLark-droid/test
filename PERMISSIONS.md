# Larkアプリ権限設定ガイド

## 🎯 このアプリに必要な権限（3つだけ！）

権限設定は**検索してチェックするだけ**で完了します。

---

## 📋 権限チェックリスト

### ✅ 権限1: カレンダー情報読み取り

**検索キーワード:**
```
以应用身份读取日历信息
```

**見つかる場所:**
- セクション: 日历（カレンダー）
- 英語名: Access calendar and schedule information as the app

**画面イメージ:**
```
日历
  ☐ 查看、评论日程
  ☑ 以应用身份读取日历信息  ← これをチェック！
  ☐ 查看、创建、编辑日程
```

---

### ✅ 权限2: メッセージ送受信

**検索キーワード:**
```
获取与发送单聊、群组消息
```

**見つかる場所:**
- セクション: 消息与群组（メッセージとグループ）
- 英語名: Obtain and send messages in private and group chats

**画面イメージ:**
```
消息与群组
  ☑ 获取与发送单聊、群组消息  ← これをチェック！
  ☐ 接收群聊中@机器人消息事件
```

---

### ✅ 权限3: Bot送信

**検索キーワード:**
```
以应用的身份发送消息
```

**見つかる場所:**
- セクション: 消息与群组（メッセージとグループ）
- 英語名: Send messages as the app

**画面イメージ:**
```
消息与群组
  ☐ 读取用户发给机器人的单聊消息
  ☑ 以应用的身份发送消息  ← これをチェック！
```

---

## 🔍 検索の使い方

### ステップ1: 権限管理ページを開く
1. アプリ詳細ページの左メニュー
2. 「权限管理」をクリック

### ステップ2: 検索ボックスを使う
1. ページ上部に検索ボックスがあります
2. 上記の検索キーワードをコピペ
3. 検索結果から該当項目を探す
4. チェックボックスをON

### ステップ3: 保存
1. ページ右上の「保存」をクリック
2. リロードして確認

---

## ⚡ クイックコピー用

権限設定時に以下を順番にコピペして検索：

1. `以应用身份读取日历信息`
2. `获取与发送单聊、群组消息`
3. `以应用的身份发送消息`

それぞれチェック → 保存 で完了！

---

## ❌ よくある間違い

### 間違い1: 似た名前の権限を選んでしまう
```
❌ 查看、创建、编辑日程
✅ 以应用身份读取日历信息  ← これが正解
```

### 間違い2: 全文検索しない
```
❌ 「日历」で検索 → たくさん出てきて迷う
✅ 「以应用身份读取日历信息」で検索 → 1つだけ出る
```

### 間違い3: 保存を忘れる
```
❌ チェックだけして画面を閉じる
✅ 必ず「保存」ボタンをクリック
```

---

## 🎓 権限の意味

### 1. 以应用身份读取日历信息
- カレンダーのイベント一覧を取得
- 空き時間を検出するために必要

### 2. 获取与发送单聊、群组消息
- チャットメッセージの送受信
- 結果をチャットに送るために必要

### 3. 以应用的身份发送消息
- アプリ名義でメッセージ送信
- Bot送信に必要

---

## 📸 スクリーンショット参考

権限設定画面は以下のような構造：

```
┌─────────────────────────────────────────┐
│ [検索ボックス]                          │ ← ここに検索キーワードをコピペ
├─────────────────────────────────────────┤
│                                         │
│ 日历                                    │
│   ☐ 查看、评论日程                      │
│   ☑ 以应用身份读取日历信息              │ ← チェック！
│   ☐ 查看、创建、编辑日程                │
│                                         │
│ 消息与群组                              │
│   ☑ 获取与发送单聊、群组消息            │ ← チェック！
│   ☑ 以应用的身份发送消息                │ ← チェック！
│                                         │
└─────────────────────────────────────────┘
                                    [保存] ← 最後にクリック！
```

---

## ✅ 設定完了の確認

以下を確認してください：

- [ ] 3つの権限すべてにチェックが入っている
- [ ] 「保存」ボタンをクリックした
- [ ] ページをリロードしても3つともチェック済み

全て完了したら .env に App ID と Secret を設定して `npm run dev` を実行！
