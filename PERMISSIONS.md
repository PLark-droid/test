# Larkアプリ権限設定ガイド

## 🎯 このアプリに必要な権限（3つだけ！）

権限設定は**検索してチェックするだけ**で完了します。

**日本語版Lark（英語表示）でも、中国語版Feishu でも対応！**

---

## 🌏 あなたのLarkの言語設定を確認

Larkの言語設定によって表示される権限名が異なります：

- 🇺🇸 **英語版 Lark**: 英語の権限名
- 🇨🇳 **中国語版 Feishu**: 中国語の権限名
- 🇯🇵 **日本語版 Lark**: 通常は英語表示

**→ 以下、両方の検索キーワードを記載しています！**

---

## 📋 権限チェックリスト

### ✅ 権限1: カレンダー情報読み取り

#### 🇺🇸 英語版Lark で検索する場合
```
Access calendar
```
または
```
calendar information as the app
```

**チェックする項目:**
```
Calendar
  ☐ View and comment on events
  ☑ Access calendar and schedule information as the app  ← これ！
  ☐ View, create, and edit events
```

#### 🇨🇳 中国語版Feishu で検索する場合
```
以应用身份读取日历信息
```

**チェックする項目:**
```
日历
  ☐ 查看、评论日程
  ☑ 以应用身份读取日历信息  ← これ！
  ☐ 查看、创建、编辑日程
```

**💡 見つけ方:**
- セクション名: `Calendar` / `日历`
- "app" というキーワードが含まれる項目を探す

---

### ✅ 权限2: メッセージ送受信

#### 🇺🇸 英語版Lark で検索する場合
```
Obtain and send
```
または
```
messages in private and group
```

**チェックする項目:**
```
Messaging
  ☑ Obtain and send messages in private and group chats  ← これ！
  ☐ Receive messages mentioning the bot in group chats
```

#### 🇨🇳 中国語版Feishu で検索する場合
```
获取与发送单聊、群组消息
```

**チェックする項目:**
```
消息与群组
  ☑ 获取与发送单聊、群组消息  ← これ！
  ☐ 接收群聊中@机器人消息事件
```

**💡 見つけ方:**
- セクション名: `Messaging` / `消息与群组`
- "Obtain" / "获取" というキーワードで始まる項目

---

### ✅ 权限3: Bot送信

#### 🇺🇸 英語版Lark で検索する場合
```
Send messages as the app
```
または
```
messages as the app
```

**チェックする項目:**
```
Messaging
  ☐ Read messages sent to the bot in private chats
  ☑ Send messages as the app  ← これ！
```

#### 🇨🇳 中国語版Feishu で検索する場合
```
以应用的身份发送消息
```

**チェックする項目:**
```
消息与群组
  ☐ 读取用户发给机器人的单聊消息
  ☑ 以应用的身份发送消息  ← これ！
```

**💡 見つけ方:**
- セクション名: `Messaging` / `消息与群组`
- "Send messages as" / "以应用的身份" というキーワードを探す

---

## 🔍 検索の使い方

### ステップ1: 権限管理ページを開く
1. アプリ詳細ページの左メニュー
2. 「权限管理」をクリック

### ステップ2: 検索ボックスを使う
1. ページ上部に検索ボックスがあります
2. 上記の検索キーワードをコピペ
3. 検索結果から該当項目を探す
4. チェックボックスをON

### ステップ3: 保存
1. ページ右上の「保存」をクリック
2. リロードして確認

---

## ⚡ クイックコピー用

### 🇺🇸 英語版Larkの場合

権限設定時に以下を順番にコピペして検索：

1. `calendar information as the app`
2. `Obtain and send messages`
3. `Send messages as the app`

それぞれチェック → 保存 で完了！

### 🇨🇳 中国語版Feishuの場合

1. `以应用身份读取日历信息`
2. `获取与发送单聊、群组消息`
3. `以应用的身份发送消息`

それぞれチェック → 保存 で完了！

---

## ❌ よくある間違い

### 間違い1: 似た名前の権限を選んでしまう

**英語版の場合:**
```
❌ View, create, and edit events
✅ Access calendar and schedule information as the app  ← これが正解
```
**ポイント:** "as the app" というフレーズが入っているものを選ぶ

**中国語版の場合:**
```
❌ 查看、创建、编辑日程
✅ 以应用身份读取日历信息  ← これが正解
```
**ポイント:** "以应用身份" というフレーズが入っているものを選ぶ

### 間違い2: 検索キーワードが短すぎる
```
❌ 「Calendar」で検索 → たくさん出てきて迷う
✅ 「calendar information as the app」で検索 → 1つだけ出る
```

### 間違い3: 保存を忘れる
```
❌ チェックだけして画面を閉じる
✅ 必ず「保存」または「Save」ボタンをクリック
```

---

## 🎓 権限の意味

### 1. 以应用身份读取日历信息
- カレンダーのイベント一覧を取得
- 空き時間を検出するために必要

### 2. 获取与发送单聊、群组消息
- チャットメッセージの送受信
- 結果をチャットに送るために必要

### 3. 以应用的身份发送消息
- アプリ名義でメッセージ送信
- Bot送信に必要

---

## 📸 画面イメージ

### 🇺🇸 英語版Lark の場合

```
┌──────────────────────────────────────────────────┐
│ [Search permissions...]                          │ ← 検索ボックス
├──────────────────────────────────────────────────┤
│                                                  │
│ Calendar                                         │
│   ☐ View and comment on events                  │
│   ☑ Access calendar and schedule information    │ ← チェック！
│       as the app                                 │
│   ☐ View, create, and edit events               │
│                                                  │
│ Messaging                                        │
│   ☑ Obtain and send messages in private and     │ ← チェック！
│       group chats                                │
│   ☑ Send messages as the app                    │ ← チェック！
│                                                  │
└──────────────────────────────────────────────────┘
                                           [Save] ← クリック！
```

### 🇨🇳 中国語版Feishu の場合

```
┌─────────────────────────────────────────┐
│ [搜索权限...]                           │ ← 検索ボックス
├─────────────────────────────────────────┤
│                                         │
│ 日历                                    │
│   ☐ 查看、评论日程                      │
│   ☑ 以应用身份读取日历信息              │ ← チェック！
│   ☐ 查看、创建、编辑日程                │
│                                         │
│ 消息与群组                              │
│   ☑ 获取与发送单聊、群组消息            │ ← チェック！
│   ☑ 以应用的身份发送消息                │ ← チェック！
│                                         │
└─────────────────────────────────────────┘
                                    [保存] ← クリック！
```

---

## ✅ 設定完了の確認

以下を確認してください：

- [ ] 3つの権限すべてにチェックが入っている
- [ ] 「保存」ボタンをクリックした
- [ ] ページをリロードしても3つともチェック済み

全て完了したら .env に App ID と Secret を設定して `npm run dev` を実行！
